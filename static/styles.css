/* Base grid layouts */
.main-grid {
    display: grid;
    grid-template-rows: auto auto;
    gap: 11px;  /* Exactly 3mm */
    padding: 15px;
    max-width: 1600px;
    margin: 0 auto;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

/* First row - Devices */
.devices-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    width: 100%;
    margin: 0;
    padding: 0;
}

/* Right section with 3 panels in a row */
.right-section {
    display: flex;
    gap: 12px;  /* Slightly reduce horizontal gap */
    width: 100%;
}

/* Individual panel widths */
#cloudApp {
    flex: 2;  /* Increase width further */
    width: 45%;  /* Fixed width for Cloud App Status */
    display: flex;
    flex-direction: column;
}

#cloudApp h2 {
    margin: 0 0 12px 0;
    font-size: 14px;
    font-weight: 600;
    color: #475569;
    padding-left: 0;  /* Remove any left padding */
}

#watchdogPanel,
.simulation-control {
    flex: 0.8;  /* Decrease width of control panels */
    width: 27%;  /* Fixed width for control panels */
    display: flex;
    flex-direction: column;
    min-width: 0;  /* Allow panel to shrink below content size */
}

/* Base panel styles */
.device-panel,
.simulation-control {
    background: linear-gradient(to bottom right, #ffffff, #fafbff);
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    padding: 12px;
    margin: 0;  /* Remove any margins */
    font-size: 15px;  /* Enlarged base font */
}

.device-panel,
#cloudApp,
#watchdogPanel,
.simulation-control {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    padding: 15px;
}

/* Panel content */
.cloud-app-content,
.watchdog-settings,
.simulation-control > div:not(h2) {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.cloud-app-content {
    display: flex;
    flex-direction: column;
    gap: 2px;  /* Tighter vertical spacing */
}

/* Pipeline stats layout */
.pipeline-stats,
.pipeline-timing {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2px;  /* Tighter vertical spacing */
    margin-bottom: 8px;
}

/* Status items spacing */
.stat-item,
.timing-item {
    font-size: 11px;  /* Slightly smaller font */
    padding: 4px 8px;
    background: transparent;
    border: 1px solid rgba(0,0,0,0.08);
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: auto;  /* Allow height to adjust to content */
    min-height: 24px;  /* Reduce height */
    line-height: 1.2;
    white-space: nowrap;  /* Prevent wrapping */
    overflow: hidden;
    text-overflow: ellipsis;
    gap: 12px;
    border: 1px solid rgba(0, 0, 0, 0.05);
    position: relative;
    transition: all 0.2s ease;
}

/* Add hover effect to show full text */
.stat-item:hover,
.timing-item:hover {
    white-space: normal;
    overflow: visible;
    z-index: 1;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

/* Control elements */
button,
input {
    height: 28px;
    padding: 4px 8px;
    font-size: 12px;
    width: 100%;
    box-sizing: border-box;
}

/* Remove nested layouts */
.control-section {
    display: contents;
}

/* Server status styling */
.server-status {
    padding: 4px 8px;
    background: #f1f5f9;
    border-radius: 6px;
    margin-bottom: 2px;
    font-weight: 500;
    font-size: 13px;
    min-height: 24px;
}

/* Second row - Cloud App and Controls */
.controls-stack {
    display: none;
}

/* Remove any nested control sections */
.control-section {
    display: contents;
}

/* Cloud App panel */
#cloudApp {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    padding: 15px;
    display: flex;
    flex-direction: column;
    flex: 2;  /* Take more space than control panels */
    min-height: 180px;
    max-height: 180px;
    overflow: auto;
    font-size: 13px;  /* Base font size for panels */
    width: 0;  /* Allow flex-grow to control width */
}

/* Explicit status section styles */
#cloudApp .status-section {
    width: 120px;
    padding-right: 12px;
    border-right: 1px solid #eee;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

/* Explicit metrics section styles */
#cloudApp .metrics-section {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
    align-content: start;
}

/* Explicit metric items */
#cloudApp .metric-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 10px;
    background: #f8f8f8;
    border-radius: 6px;
    border-left: 3px solid #2196F3;
    height: 28px;
}

#cloudApp .server-status {
    grid-column: 1 / -1;
    margin-bottom: 8px;
    height: 28px;
}

/* Status indicators */
#cloudApp .status-indicator {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    background: #f8f8f8;
    border-radius: 6px;
    height: 28px;
}

#cloudApp .status-circle {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
}

/* Status section - left side of Cloud App */
.status-section {
    width: 120px;
    padding-right: 12px;
    border-right: 1px solid #eee;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Metrics section - right side of Cloud App */
.metrics-section {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    align-content: start;
}

/* Control panels */
#watchdogPanel,
.simulation-control {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    padding: 15px;
    flex: 1.5;  /* Each takes up 30% of the space */
    min-height: 180px;
    max-height: 180px;
    overflow: auto;
    display: flex;
    flex-direction: column;
    gap: 10px;
    font-size: 13px;  /* Base font size for panels */
    width: 0;  /* Allow flex-grow to control width */
}

/* Button and input sizing in control panels */
#watchdogPanel button,
.simulation-control button,
#watchdogPanel input,
.simulation-control input {
    width: 100%;
    height: 28px;
    padding: 6px 10px;
    margin-bottom: 8px;
    border-radius: 6px;
    font-size: 13px;
}

/* Metric items styling */
.metric-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 10px;
    background: #f8f8f8;
    border-radius: 6px;
    border-left: 3px solid #2196F3;
    height: 28px;
}

.metric-label {
    font-weight: 500;
    color: #475569;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.2;
    font-size: 11px;
    max-width: 65px;  /* Ensure space for value */
}

.metric-value {
    font-family: monospace;
    background: rgba(33, 150, 243, 0.1);
    padding: 2px 6px;
    border-radius: 4px;
    color: #2196F3;
    width: auto;
    min-width: 30px;
    text-align: right;
    line-height: 1.2;
    font-size: 10px;
}

/* Server status prominence */
.server-status {
    grid-column: 1 / -1;
    background: #f1f5f9;
    padding: 10px 12px;
    border-radius: 6px;
    border-left: 4px solid #2196F3;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 12px;
    font-weight: 500;
    height: 28px;
}

/* Status indicators */
.status-indicator {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    background: #f8f8f8;
    border-radius: 6px;
    height: 28px;
}

.status-circle {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
    margin-right: 4px;
}

.status-circle.green {
    background-color: #22c55e;
    box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.2);
}

.status-circle.red {
    background-color: #ef4444;
    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.2);
}

/* Cloud App Status specific styles */
.cloud-app-content {
    display: flex;
    flex-direction: column;
    gap: 12px;
    height: 100%;
}

/* Left side indicators */
.status-indicators {
    width: 120px;
    padding-right: 12px;
    border-right: 1px solid #eee;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

/* Status indicator items */
.status-indicator {
    display: flex;
    align-items: center;
    padding: 12px 15px;
    background: #f8f8f8;
    border-radius: 6px;
    gap: 10px;
}

.central-node {
    padding: 6px 10px;
    background: #f8f8f8;
    border-radius: 6px;
    border-left: 3px solid #ef4444;
    display: flex;
    align-items: center;
    gap: 6px;
    height: 28px;
    font-size: 12px;
}

/* Metrics layout */
.cloud-metrics {
    flex: 1;
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
    align-content: start;
}

/* Server status in metrics */
.server-status {
    grid-column: 1 / -1;
    background: #f1f5f9;
    padding: 6px 10px;
    border-radius: 6px;
    border-left: 3px solid #2196F3;
    margin-bottom: 8px;
    font-size: 12px;
    height: 28px;
    display: flex;
    align-items: center;
}

/* Fix for any potential overlay issues */
.event-log {
    grid-column: 1 / -1;
    width: 100%;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    padding: 20px;
    margin-top: auto;  /* Push to bottom */
    position: relative;  /* Ensure proper stacking */
    z-index: 1;  /* Ensure proper stacking */
}

/* Responsive design refinements */
@media (max-width: 1400px) {
    .controls-stack {
        grid-template-columns: minmax(0, 2fr) minmax(0, 1fr);  /* Slightly adjust ratio on smaller screens */
    }
}

@media (max-width: 1200px) {
    .controls-stack {
        flex-direction: column;
    }
    
    .control-section {
        height: auto;
        flex-direction: row;
        width: 100%;
    }
    
    #watchdogPanel,
    .simulation-control {
        min-height: 150px;
        height: auto;
    }
    
    #cloudApp {
        min-height: 400px;  /* Reduce minimum height */
        max-width: none;
    }
    
    .metrics-section {
        gap: 12px;  /* Tighter spacing */
        max-width: none;
    }
}

@media (max-width: 768px) {
    .devices-grid {
        grid-template-columns: 1fr;  /* Stack devices */
        gap: 15px;
    }
    
    #cloudApp {
        grid-template-columns: 1fr;  /* Full width layout */
        min-height: auto;
    }
    
    .status-section {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid #eee;
        padding-right: 0;
        padding-bottom: 15px;
        margin-bottom: 15px;
    }
    
    .metrics-section {
        grid-template-columns: 1fr;  /* Single column metrics */
    }
    
    .control-section {
        flex-direction: column;
    }
    
    .metric-item {
        min-height: 40px;  /* Slightly reduce height */
    }
    
    #watchdogPanel,
    .simulation-control {
        width: 100%;
    }
}

@media (max-width: 480px) {
    .main-grid {
        padding: 15px;
        gap: 20px;
    }
    
    .controls-stack {
        gap: 20px;
    }
    
    #cloudApp,
    #watchdogPanel,
    .simulation-control {
        padding: 15px;  /* Reduce padding */
    }
    
    .metric-item {
        padding: 10px 12px;
    }
}

/* Ensure proper spacing in control panels */
#watchdogPanel > *,
.simulation-control > * {
    margin-bottom: 12px;
}

#watchdogPanel > *:last-child,
.simulation-control > *:last-child {
    margin-bottom: 0;
}

/* Remove any conflicting styles */
.control-section,
#cloudApp,
#watchdogPanel,
.simulation-control {
    position: relative;
    z-index: 1;
}

/* Ensure proper panel backgrounds */
.device-panel,
#cloudApp,
#watchdogPanel,
.simulation-control {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

/* Reset any unwanted backgrounds */
.main-grid > *,
.controls-stack,
.control-section {
    background: none;
    box-shadow: none;
}

/* Remove duplicate styles */
.status-section,
.metrics-section {
    display: none !important;
}

/* Cloud App Status panel */
#cloudApp .cloud-app-content {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

#cloudApp .status-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px;
    background: #f8f8f8;
    border-radius: 6px;
    border-left: 3px solid #ef4444;
}

#cloudApp .pipeline-section {
    display: flex;
    flex-direction: column;
    gap: 2px;  /* Tighter vertical spacing */
}

/* Server status */
.server-status {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    background: #f1f5f9;
    border-radius: 6px;
    border-left: 3px solid #2196F3;
    margin-bottom: 8px;
}

/* Pipeline stats and timing */
.pipeline-stats,
.pipeline-timing {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2px;  /* Tighter vertical spacing */
}

.stat-item,
.timing-item,
.server-status {
    padding: 6px 10px;
    font-size: 12px;
    border-radius: 6px;
}

/* Pipeline status */
.pipeline-status {
    display: flex;
    justify-content: space-between;
    padding: 6px 10px;
    background: #f8f8f8;
    border-radius: 6px;
    font-size: 12px;
    margin-top: 4px;
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2px;  /* Tighter vertical spacing */
    padding: 8px;
    background: #f8f9fa;
}

/* Control panels */
#watchdogPanel,
.simulation-control {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Panel headers */
.device-panel h2 {
    margin: 0 0 12px 0;
    font-size: 15px;
    font-weight: 600;
    color: #1e293b;
}

/* Fixing horizontal panel alignment in right section */
.right-section {
    display: flex;
    gap: 12px;  /* Slightly reduce horizontal gap */
    width: 100%;
}

.right-section > * {
    flex: 1;
    min-width: 0; /* Prevent flex items from overflowing */
    height: auto;
}

/* Give Cloud App more space */
#cloudApp {
    flex: 2;
}

#watchdogPanel,
.simulation-control {
    flex: 0.8;  /* Decrease width of control panels */
}

/* Remove unnecessary nesting */
.control-section {
    display: none;
}

/* Panel content */
.device-panel,
.simulation-control {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Headers */
.device-panel h2,
.simulation-control h2 {
    margin: 0;
    font-size: 14px;
    color: #475569;
    font-weight: 600;
}

/* Content areas */
.cloud-app-content,
.watchdog-settings,
.simulation-control > *:not(h2) {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

/* Stats and status items */
.stat-item,
.timing-item,
.server-status {
    padding: 4px 8px;
    font-size: 11px;  /* Slightly smaller font */
    border-radius: 6px;
    border: 1px solid rgba(0, 0, 0, 0.05);
    min-height: 24px;  /* Reduce height */
}

/* Button and input sizing */
#watchdogPanel button,
.simulation-control button,
#watchdogPanel input,
.simulation-control input {
    height: 28px;
    padding: 4px 8px;
    font-size: 12px;
    width: 100%;
    margin-bottom: 4px;
}

/* Panel width distribution */
#cloudApp {
    flex: 2;  /* Increase width further */
}

#watchdogPanel,
.simulation-control {
    flex: 0.8;  /* Decrease width of control panels */
}

/* Common panel styles - removing scroll and fixed heights */
#cloudApp,
#watchdogPanel,
.simulation-control {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    padding: 15px;
    height: auto;
    min-height: 0;
    max-height: none;
    overflow: visible;
}

.cloud-app-content,
.pipeline-section,
.watchdog-settings,
.simulation-control > div,
.metrics-section,
.status-section {
    height: auto;
    min-height: 0;
    max-height: none;
    overflow: visible;
}

.pipeline-status {
    display: flex;
    justify-content: space-between;
    font-size: 11px;
    gap: 10px;
    margin-top: 2px;  /* Tighter vertical spacing */
}

#pipelineStatus,
#lastFrameTime {
    flex: 1;
    background: #f8f8f8;
    border-radius: 6px;
    padding: 6px 10px;
    border-left: 3px solid #2196F3;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.stat-item,
.timing-item,
.pipeline-status > div {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8px;
    padding: 4px 8px;  /* Tighter vertical spacing */
    min-height: 24px;  /* Reduce height */
}

/* Label styles */
.stat-item::after,
.timing-item::after,
.pipeline-status > div::after {
    content: ":";
    margin-right: 4px;
}

/* Value styles */
.stat-item span,
.timing-item span,
.pipeline-status span {
    font-family: monospace;
    background: rgba(33, 150, 243, 0.1);
    padding: 2px 4px;  /* Tighter vertical spacing */
    border-radius: 4px;
    color: #2196F3;
    font-weight: 500;
    font-weight: 600;
    letter-spacing: 0.02em;
    transition: all 0.2s ease;
    min-width: 35px;  /* Smaller minimum width */
}

.value.changed {
    animation: pulse 0.5s ease;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); background: rgba(33, 150, 243, 0.2); }
    100% { transform: scale(1); }
}

/* Adjust text alignment */
.stat-item > span:last-child,
.timing-item > span:last-child,
.pipeline-status > div > span:last-child {
    text-align: right;
    min-width: 50px;
}

/* Metric items styling */
.stat-item,
.timing-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 10px;
    background: #f8f8f8;
    border-radius: 6px;
    font-size: 13px;
    line-height: 1.2;
}

/* Label part */
.stat-item .label,
.timing-item .label {
    color: #64748b;
    font-weight: 500;
    font-size: 11px;
    max-width: 70px;  /* Limit label width */
}

/* Value part */
.stat-item .value,
.timing-item .value {
    font-family: 'SF Mono', 'Consolas', monospace;
    font-size: 11px;
    font-weight: 600;
    padding: 2px 4px;  /* Tighter vertical spacing */
    border-radius: 4px;
    min-width: 35px;  /* Smaller minimum width */
    text-align: right;
}

/* Frame counters - blue theme */
#deviceAFrames .value,
#deviceBFrames .value {
    background: rgba(33, 150, 243, 0.1);
    color: #2196F3;
}

/* Control messages - purple theme */
#controlFrames .value,
#controlTime .value {
    background: rgba(156, 39, 176, 0.1);
    color: #9c27b0;
}

/* Watchdog messages - orange theme */
#watchdogFrames .value,
#watchdogTime .value {
    background: rgba(255, 152, 0, 0.1);
    color: #ff9800;
}

/* Frame rates - green theme */
#deviceATime .value,
#deviceBTime .value {
    background: rgba(34, 197, 94, 0.15);
    color: #15803d;
}

/* Status indicators */
#pipelineStatus .value {
    background: rgba(33, 150, 243, 0.1);
    color: #2196F3;
}

#pipelineStatus .value[data-status="Processing"] {
    background: rgba(34, 197, 94, 0.15) !important;
    color: #15803d !important;
    animation: pulse 2s infinite;
}

#lastFrameTime .value {
    background: rgba(158, 158, 158, 0.1);
    color: #757575;
    font-size: 10px;
}

/* Labels styling */
.stat-item .label,
.timing-item .label,
.pipeline-status .label {
    color: #64748b;
    font-weight: 500;
    font-size: 11px;
}

/* Server status */
.server-status {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    background: #f1f5f9;
    border-radius: 6px;
    border-left: 3px solid #2196F3;
    margin-bottom: 8px;
}

.server-status .status-label {
    font-weight: 500;
    color: #64748b;
}

.server-status .server-state {
    font-family: monospace;
    background: rgba(34, 197, 94, 0.15);
    color: #15803d;
    padding: 2px 6px;
    border-radius: 4px;
}

.server-status .server-state.frozen {
    background: rgba(239, 68, 68, 0.15);
    color: #b91c1c;
    border-left: 3px solid #b91c1c;
}

/* Pipeline status items */
.pipeline-status {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2px;  /* Tighter vertical spacing */
    margin-top: 2px;  /* Tighter vertical spacing */
}

.pipeline-status > div {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 4px 8px;  /* Tighter vertical spacing */
    background: #f8f8f8;
    border-radius: 6px;
    font-size: 11px;
    border: 1px solid rgba(0, 0, 0, 0.05);
    min-height: 24px;  /* Reduce height */
}

.pipeline-status .label {
    color: #64748b;
    font-weight: 500;
    font-size: 11px;
    max-width: 70px;  /* Limit label width */
}

.pipeline-status .value {
    font-family: 'SF Mono', 'Consolas', monospace;
    font-size: 11px;
    font-weight: 600;
    padding: 2px 4px;  /* Tighter vertical spacing */
    border-radius: 4px;
    min-width: 35px;  /* Smaller minimum width */
    text-align: right;
    font-weight: 600;
    letter-spacing: 0.02em;
    transition: all 0.2s ease;
}

.value[data-status="Processing"] {
    background: rgba(34, 197, 94, 0.15) !important;
    color: #15803d !important;
}

.value[data-status="Idle"] {
    background: rgba(158, 158, 158, 0.15) !important;
    color: #616161 !important;
}

/* Mode indicators */
.value[data-mode="Auto"] {
    background: rgba(34, 197, 94, 0.15) !important;
    color: #15803d !important;
}

.value[data-mode="Manual"] {
    background: rgba(249, 115, 22, 0.15) !important;
    color: #c2410c !important;
}

/* Tooltip styles */
[data-tooltip] {
    position: relative;
}

[data-tooltip]:before {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    padding: 4px 8px;
    background: #475569;
    color: white;
    font-size: 10px;
    border-radius: 4px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    z-index: 1;
}

[data-tooltip]:hover:before {
    opacity: 1;
    visibility: visible;
    bottom: calc(100% + 5px);
}

/* Watchdog Control Panel specific styles */
#watchdogPanel {
    background: linear-gradient(to bottom right, #ffffff, #fff8f0);
    border-top: 3px solid #f97316;
}

#watchdogPanel h2 {
    color: #9a3412;
}

.watchdog-status {
    font-size: 13px;
    padding: 3px 8px;
    border-radius: 4px;
}

.watchdog-status.active {
    background: rgba(34, 197, 94, 0.15);
    color: #15803d;
}

.watchdog-status.disabled {
    background: rgba(239, 68, 68, 0.15);
    color: #b91c1c;
}

.watchdog-button {
    background: #f97316;
    color: white;
    border: none;
    border-radius: 4px;
    transition: all 0.2s;
}

.watchdog-button:hover {
    background: #ea580c;
}

.watchdog-button.manual-reset {
    background: #dc2626;
}

.watchdog-button.manual-reset:hover {
    background: #b91c1c;
}

/* Simulation Control Panel specific styles */
.simulation-control {
    background: linear-gradient(to bottom right, #ffffff, #f0f9ff);
    border-top: 3px solid #0ea5e9;
}

.simulation-control h2 {
    color: #0369a1;
}

.simulation-speed {
    font-size: 13px;
    padding: 3px 8px;
    border-radius: 4px;
}

.simulation-speed.fast {
    background: rgba(249, 115, 22, 0.15);
    color: #c2410c;
}

.simulation-speed.normal {
    background: rgba(34, 197, 94, 0.15);
    color: #15803d;
}

.simulation-speed.slow {
    background: rgba(14, 165, 233, 0.15);
    color: #0369a1;
}

.control-button {
    background: #0ea5e9;
    color: white;
    border: none;
    border-radius: 4px;
    transition: all 0.2s;
}

.control-button:hover {
    background: #0284c7;
}

.control-button.halt {
    background: #dc2626;
}

.control-button.halt:hover {
    background: #b91c1c;
}

/* Interactive elements */
input[type="range"] {
    height: 6px;
    background: #e2e8f0;
    border-radius: 3px;
    cursor: pointer;
}

input[type="range"]::-webkit-slider-thumb {
    width: 16px;
    height: 16px;
    background: #0ea5e9;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.2s;
}

input[type="range"]::-webkit-slider-thumb:hover {
    transform: scale(1.1);
}

/* Speed ranges indicators */
.speed-ranges {
    display: flex;
    justify-content: space-between;
    font-size: 11px;
    color: #64748b;
    padding: 4px 0;
}

.speed-range.fast { color: #c2410c; }
.speed-range.normal { color: #15803d; }
.speed-range.slow { color: #0369a1; }

/* Input hints */
.input-hint {
    font-size: 11px;
    color: #64748b;
    margin-top: 2px;
}

/* Dynamic animations for status changes and activity indicators */
.stat-item .value[data-status="Processing"],
.timing-item .value[data-status="Processing"] {
    animation: glow 2s ease-in-out infinite;
}

@keyframes glow {
    0% { box-shadow: 0 0 0 rgba(34, 197, 94, 0); }
    50% { box-shadow: 0 0 8px rgba(34, 197, 94, 0.3); }
    100% { box-shadow: 0 0 0 rgba(34, 197, 94, 0); }
}

/* Value change animation */
.value-change {
    animation: highlight 1s ease;
}

@keyframes highlight {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); background: rgba(14, 165, 233, 0.2); }
    100% { transform: scale(1); }
}

/* Status transitions */
.status-indicator,
.server-state,
.watchdog-status,
.simulation-speed {
    transition: all 0.3s ease;
}

/* Frame activity indicators */
#deviceAFrames .value.active,
#deviceBFrames .value.active {
    animation: pulse-border 1.5s ease infinite;
}

@keyframes pulse-border {
    0% { border-color: rgba(14, 165, 233, 0.3); }
    50% { border-color: rgba(14, 165, 233, 0.8); }
    100% { border-color: rgba(14, 165, 233, 0.3); }
}

/* Critical state indicators */
.server-state.frozen,
.watchdog-status.triggered {
    animation: warning-flash 2s ease infinite;
}

@keyframes warning-flash {
    0% { opacity: 1; }
    50% { opacity: 0.7; }
    100% { opacity: 1; }
}

/* Pipeline activity indicator */
.pipeline-status .value[data-status="Processing"] {
    background: linear-gradient(90deg, 
        rgba(34, 197, 94, 0.15) 0%,
        rgba(34, 197, 94, 0.25) 50%,
        rgba(34, 197, 94, 0.15) 100%
    );
    background-size: 200% 100%;
    animation: gradient-flow 2s linear infinite;
}

@keyframes gradient-flow {
    0% { background-position: 100% 0; }
    100% { background-position: -100% 0; }
}

/* Watchdog auto mode indicator */
.value[data-mode="Auto"] {
    animation: auto-pulse 3s ease infinite;
}

@keyframes auto-pulse {
    0% { box-shadow: 0 0 0 rgba(34, 197, 94, 0); }
    50% { box-shadow: 0 0 6px rgba(34, 197, 94, 0.2); }
    100% { box-shadow: 0 0 0 rgba(34, 197, 94, 0); }
}

/* Device panels dynamic colors */
.device-values .operational-value {
    font-family: 'SF Mono', 'Consolas', monospace;
    padding: 3px 8px;
    border-radius: 4px;
    transition: all 0.3s ease;
}

.device-values .operational-value {
    padding: 4px 10px;
    margin: 2px 0;
    min-width: 60px;
    text-align: center;
    font-weight: 600;
}

.operational-value.value-1 {
    background: rgba(34, 197, 94, 0.2);
    color: #15803d;
    border-left: 4px solid #15803d;
    animation: glow-success 2s infinite;
}

.operational-value.value-2 {
    background: rgba(245, 158, 11, 0.2);
    color: #b45309;
    border-left: 4px solid #b45309;
    animation: glow-warning 2s infinite;
}

.operational-value.value-3 {
    background: rgba(239, 68, 68, 0.2);
    color: #b91c1c;
    border-left: 4px solid #b91c1c;
    animation: glow-danger 2s infinite;
}

@keyframes glow-success {
    0% { box-shadow: 0 0 0 rgba(34, 197, 94, 0); }
    50% { box-shadow: 0 0 8px rgba(34, 197, 94, 0.3); }
    100% { box-shadow: 0 0 0 rgba(34, 197, 94, 0); }
}

@keyframes glow-warning {
    0% { box-shadow: 0 0 0 rgba(245, 158, 11, 0); }
    50% { box-shadow: 0 0 8px rgba(245, 158, 11, 0.3); }
    100% { box-shadow: 0 0 0 rgba(245, 158, 11, 0); }
}

@keyframes glow-danger {
    0% { box-shadow: 0 0 0 rgba(239, 68, 68, 0); }
    50% { box-shadow: 0 0 8px rgba(239, 68, 68, 0.3); }
    100% { box-shadow: 0 0 0 rgba(239, 68, 68, 0); }
}

/* Enhanced watchdog status styling */
.device-values .watchdog-status {
    font-family: 'SF Mono', 'Consolas', monospace;
    padding: 3px 8px;
    border-radius: 4px;
    transition: all 0.3s ease;
}

.device-values .watchdog-status {
    padding: 4px 10px;
    margin: 2px 0;
    min-width: 60px;
    text-align: center;
    font-weight: 600;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.device-values .watchdog-status.active {
    background: rgba(34, 197, 94, 0.2);
    border-left: 4px solid #15803d;
    animation: pulse-watchdog-ok 3s infinite;
}

.device-values .watchdog-status.triggered {
    background: rgba(239, 68, 68, 0.2);
    border-left: 4px solid #b91c1c;
    animation: pulse-watchdog-error 1s infinite;
}

@keyframes pulse-watchdog-ok {
    0% { background: rgba(34, 197, 94, 0.2); }
    50% { background: rgba(34, 197, 94, 0.3); }
    100% { background: rgba(34, 197, 94, 0.2); }
}

@keyframes pulse-watchdog-error {
    0% { background: rgba(239, 68, 68, 0.2); }
    50% { background: rgba(239, 68, 68, 0.3); transform: scale(1.02); }
    100% { background: rgba(239, 68, 68, 0.2); }
}

/* Operational state colors for Device A */
.operational-value.value-1 {
    background: rgba(34, 197, 94, 0.15);
    color: #15803d;
    border-left: 3px solid #15803d;
}

.operational-value.value-2 {
    background: rgba(245, 158, 11, 0.15);
    color: #b45309;
    border-left: 3px solid #b45309;
}

.operational-value.value-3 {
    background: rgba(239, 68, 68, 0.15);
    color: #b91c1c;
    border-left: 3px solid #b91c1c;
}

/* Device B watchdog status colors */
.device-values .watchdog-status {
    font-family: 'SF Mono', 'Consolas', monospace;
    padding: 3px 8px;
    border-radius: 4px;
    transition: all 0.3s ease;
}

.device-values .watchdog-status.active {
    background: rgba(34, 197, 94, 0.15);
    color: #15803d;
    border-left: 3px solid #15803d;
    animation: pulse-success 2s infinite;
}

.device-values .watchdog-status.triggered {
    background: rgba(239, 68, 68, 0.15);
    color: #b91c1c;
    border-left: 3px solid #b91c1c;
    animation: pulse-warning 1s infinite;
}

@keyframes pulse-success {
    0% { box-shadow: 0 0 0 rgba(34, 197, 94, 0); }
    50% { box-shadow: 0 0 6px rgba(34, 197, 94, 0.3); }
    100% { box-shadow: 0 0 0 rgba(34, 197, 94, 0); }
}

@keyframes pulse-warning {
    0% { box-shadow: 0 0 0 rgba(239, 68, 68, 0); }
    50% { box-shadow: 0 0 8px rgba(239, 68, 68, 0.4); }
    100% { box-shadow: 0 0 0 rgba(239, 68, 68, 0); }
}

/* Device A panel theme */
#deviceA {
    background: linear-gradient(to bottom right, #ffffff, #f0fff4);
    border-top: 3px solid #22c55e;
}

#deviceA h2 {
    color: #15803d;
}

/* Device B panel theme */
#deviceB {
    background: linear-gradient(to bottom right, #ffffff, #fff7ed);
    border-top: 3px solid #f97316;
}

#deviceB h2 {
    color: #9a3412;
}

/* Module C panel theme */
#moduleC {
    background: linear-gradient(to bottom right, #ffffff, #f0f9ff);
    border-top: 3px solid #0ea5e9;
}

#moduleC h2 {
    color: #0369a1;
}

/* Device value styling */
.device-values .value-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 10px;
    margin-bottom: 4px;
    border-radius: 6px;
    background: rgba(255, 255, 255, 0.7);
}

.device-values .label {
    color: #64748b;
    font-weight: 500;
    font-size: 13px;
}

.device-values .value {
    font-family: 'SF Mono', 'Consolas', monospace;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 13px;
    background: rgba(100, 116, 139, 0.1);
    color: #475569;
}

/* Module C calculation result styling */
.device-values .calculation-result {
    font-family: 'SF Mono', 'Consolas', monospace;
    padding: 3px 8px;
    border-radius: 4px;
    transition: all 0.3s ease;
    animation: calc-update 1s ease;
}

@keyframes calc-update {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); background: rgba(14, 165, 233, 0.2); }
    100% { transform: scale(1); }
}

/* Frame rate indicators for Device A */
.device-values .frame-rate {
    background: rgba(34, 197, 94, 0.15);
    color: #15803d;
    animation: rate-pulse 2s infinite;
}

@keyframes rate-pulse {
    0% { opacity: 1; }
    50% { opacity: 0.7; }
    100% { opacity: 1; }
}

/* Device B control value feedback */
.device-values .control-value {
    background: rgba(249, 115, 22, 0.15);
    color: #c2410c;
    transition: all 0.3s ease;
}

.device-values .control-value:not(:empty) {
    animation: control-update 0.5s ease;
}

@keyframes control-update {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); background: rgba(249, 115, 22, 0.3); }
    100% { transform: scale(1); }
}

/* Status indicators for all devices */
.status-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    display: inline-block;
    margin-right: 8px;
    transition: all 0.3s ease;
}

.status-indicator.online {
    background: #22c55e;
    box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.2);
    animation: status-pulse 2s infinite;
}

.status-indicator.offline {
    background: #ef4444;
    box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.2);
    animation: status-pulse 2s infinite;
}

@keyframes status-pulse {
    0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
    70% { box-shadow: 0 0 0 6px rgba(34, 197, 94, 0); }
    100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
}

.stat-item .value,
.timing-item .value {
    font-family: 'SF Mono', 'Consolas', monospace;
    font-size: 11px;
    font-weight: 600;
    padding: 2px 4px;
    border-radius: 4px;
    min-width: 35px;
    text-align: right;
    transition: all 0.2s ease;
}

/* Add animation for value changes */
.value.changed {
    animation: value-update 0.5s ease;
    background-color: rgba(33, 150, 243, 0.2);
}

@keyframes value-update {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); background-color: rgba(33, 150, 243, 0.3); }
    100% { transform: scale(1); }
}

/* Frame counters with active state */
.stat-item .value[data-count]:not([data-count="0"]) {
    background-color: rgba(33, 150, 243, 0.1);
    color: #2196F3;
}

/* Frame rates with active state */
.timing-item .value[data-rate]:not([data-rate="0"]) {
    background-color: rgba(76, 175, 80, 0.1);
    color: #4CAF50;
}

/* Pipeline status indicators */
.pipeline-status .value[data-status="Processing"] {
    background-color: rgba(76, 175, 80, 0.1);
    color: #4CAF50;
    animation: processing-pulse 2s infinite;
}

@keyframes processing-pulse {
    0% { background-color: rgba(76, 175, 80, 0.1); }
    50% { background-color: rgba(76, 175, 80, 0.2); }
    100% { background-color: rgba(76, 175, 80, 0.1); }
}

/* Freeze button styling */
.control-button.freeze {
    background-color: #2196F3;
    color: white;
    transition: all 0.3s ease;
}

.control-button.freeze.active {
    background-color: #4CAF50;
}

.control-button.frozen {
    background-color: #ff6b6b;
    color: white;
}

/* Optional: hover state for better UX */
.control-button.frozen:hover {
    background-color: #ff4444;
}

/* Add frozen state styling */
.server-state.frozen {
    background-color: rgba(64, 6, 252, 0.733); /* #ff9800; */
    color: white;
}

.main-grid.frozen {
    opacity: 0.8;
    pointer-events: none;
}

.main-grid.frozen .control-buttons {
    pointer-events: all;
}

.frozen {
    background-color: #ff6b6b !important;
    color: white !important;
}

.frozen:hover {
    background-color: #ff4444 !important;
}

.control-button#freezeButton {
    background-color: #2196F3;
    color: white;
    transition: all 0.3s ease;
}

.control-button#freezeButton.active {
    background-color: #4CAF50;
}

#freezeButton {
    background-color: #2196F3;
    color: white;
    transition: all 0.3s ease;
    border: none;
    padding: 10px 20px;
    cursor: pointer;
    font-weight: bold;
}

#freezeButton.active {
    background-color: #4CAF50;
    box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
}

#freezeButton .button-text {
    pointer-events: none;
}

.control-input {
    margin: 10px 0;
    padding: 10px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
}

.control-input input[type="number"] {
    width: 100px;
    padding: 5px;
    border: 1px solid #ccc;
    border-radius: 4px;
    margin-right: 10px;
    background: white;
    color: #333;
}

.control-input button {
    padding: 5px 10px;
    background: #4CAF50;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.control-input button:hover {
    background: #45a049;
}

.device-values {
    margin-top: 10px;
    margin-bottom: 10px;
    background: #f8fafc;
    padding: 8px;
    border-radius: 6px;
}

.device-values .value-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 10px;
    margin-bottom: 4px;
    background: white;
    border-radius: 4px;
    min-height: 28px;
}

.device-values .label {
    color: #64748b;
    font-size: 12px;
    font-weight: 500;
}

.device-values .value,
.device-values .control-value,
.device-values .calculation-result {
    font-family: monospace;
    font-size: 12px;
    padding: 2px 6px;
    border-radius: 4px;
    min-width: 40px;
    text-align: right;
}

.device-values .value {
    background: rgba(100, 116, 139, 0.1);
    color: #475569;
}

.device-values .control-value {
    background: rgba(249, 115, 22, 0.15);
    color: #c2410c;
}

.device-values .control-value.active {
    background: rgba(34, 197, 94, 0.15);
    color: #15803d;
    animation: pulse-success 2s infinite;
}

.device-values .watchdog-status {
    background: rgba(239, 68, 68, 0.15);
    color: #b91c1c;
    padding: 2px 6px;
    border-radius: 4px;
}

.device-values .watchdog-status.active {
    background: rgba(34, 197, 94, 0.15);
    color: #15803d;
}

.device-values .calculation-result {
    background: rgba(14, 165, 233, 0.15);
    color: #0369a1;
    font-weight: 600;
}

@keyframes pulse-success {
    0% { box-shadow: 0 0 0 rgba(34, 197, 94, 0); }
    50% { box-shadow: 0 0 6px rgba(34, 197, 94, 0.3); }
    100% { box-shadow: 0 0 0 rgba(34, 197, 94, 0); }
}

.changed {
    animation: highlight 0.5s ease;
}

@keyframes highlight {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); filter: brightness(1.1); }
    100% { transform: scale(1); }
}

.operational-value {
    font-family: monospace;
    padding: 3px 8px;
    border-radius: 4px;
    min-width: 40px;
    text-align: center;
}

.operational-value.value-1 {
    background: rgba(34, 197, 94, 0.15);
    color: #15803d;
    border-left: 3px solid #15803d;
}

.operational-value.value-2 {
    background: rgba(245, 158, 11, 0.15);
    color: #b45309;
    border-left: 3px solid #b45309;
}

.operational-value.value-3 {
    background: rgba(239, 68, 68, 0.15);
    color: #b91c1c;
    border-left: 3px solid #b91c1c;
}

/* Add animation for value changes */
.changed {
    animation: highlight 0.5s ease;
}

@keyframes highlight {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); filter: brightness(1.1); }
    100% { transform: scale(1); }
}

.device-values .operational-value {
    font-family: monospace;
    font-size: 12px;
    padding: 4px 8px;
    border-radius: 4px;
    min-width: 60px;
    text-align: center;
    font-weight: 600;
    display: inline-block;
}

.device-values .operational-value.value-1 {
    background: rgba(34, 197, 94, 0.15);
    color: #15803d;
    border-left: 3px solid #15803d;
    animation: glow-success 2s infinite;
}

.device-values .operational-value.value-2 {
    background: rgba(245, 158, 11, 0.15);
    color: #b45309;
    border-left: 3px solid #b45309;
    animation: glow-warning 2s infinite;
}

.device-values .operational-value.value-3 {
    background: rgba(239, 68, 68, 0.15);
    color: #b91c1c;
    border-left: 3px solid #b91c1c;
    animation: glow-danger 2s infinite;
}

@keyframes glow-success {
    0% { box-shadow: 0 0 0 rgba(34, 197, 94, 0); }
    50% { box-shadow: 0 0 8px rgba(34, 197, 94, 0.3); }
    100% { box-shadow: 0 0 0 rgba(34, 197, 94, 0); }
}

@keyframes glow-warning {
    0% { box-shadow: 0 0 0 rgba(245, 158, 11, 0); }
    50% { box-shadow: 0 0 8px rgba(245, 158, 11, 0.3); }
    100% { box-shadow: 0 0 0 rgba(245, 158, 11, 0); }
}

@keyframes glow-danger {
    0% { box-shadow: 0 0 0 rgba(239, 68, 68, 0); }
    50% { box-shadow: 0 0 8px rgba(239, 68, 68, 0.3); }
    100% { box-shadow: 0 0 0 rgba(239, 68, 68, 0); }
}